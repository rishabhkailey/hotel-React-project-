{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Rishabh\\\\Desktop\\\\babel1\\\\react\\\\project\\\\hotel\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Rishabh\\\\Desktop\\\\babel1\\\\react\\\\project\\\\hotel\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import key from'./apiKey';var getRooms=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dest,date){var arrival_date,departure_date,_date,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!date){_date=new Date();console.log(_date);arrival_date=''+_date.getFullYear()+'-'+(_date.getMonth()+1)+'-'+_date.getDate();_date.setDate(_date.getDate()+7);departure_date=''+_date.getFullYear()+'-'+(_date.getMonth()+1)+'-'+_date.getDate();}console.log(arrival_date,departure_date);console.log(\"req = https://apidojo-booking-v1.p.rapidapi.com/properties/list?price_filter_currencycode=USD&search_id=none&order_by=popularity&languagecode=en-us&search_type=\".concat(dest.dest_type,\"&offset=0&dest_ids=\").concat(dest.dest_id,\"&guest_qty=\",2,\"&arrival_date=\").concat(arrival_date,\"&departure_date=\").concat(departure_date,\"&room_qty=\",1));_context.next=5;return fetch(\"https://apidojo-booking-v1.p.rapidapi.com/properties/list?price_filter_currencycode=USD&search_id=none&order_by=popularity&languagecode=en-us&search_type=\".concat(dest.dest_type,\"&offset=0&dest_ids=\").concat(dest.dest_id,\"&guest_qty=\",2,\"&arrival_date=\").concat(arrival_date,\"&departure_date=\").concat(departure_date,\"&room_qty=\",1),{\"method\":\"GET\",\"headers\":{\"x-rapidapi-host\":\"apidojo-booking-v1.p.rapidapi.com\",\"x-rapidapi-key\":key['key']}}).then(function(res){return res.json();}).then(function(res){if(res.message&&res.message.localeCompare(\"Key doesn't exists\")===0){console.log(res.message);console.log(\"add api key in your project file api_calls/apiKey\\nif you don't have key then get it from \\nhttps://rapidapi.com/apidojo/api/booking\");return null;}if(res.message){console.log(res.message);return null;}console.log(res);var refined_result=res.result.map(function(res){// res.main_photo_url = \"http://r-ec.bstatic.com/xdata/images/hotel/square60/77897735.jpg?k=9bef4152fd76026ad7885fc95a2a48d04a5a6bb68a1eefa5e292a8429aa3845e&o=\";\n// resolution is not good so replace square60 with max500\nvar photo_url=res.main_photo_url;var pos=photo_url.indexOf(\"square60\");photo_url=photo_url.substring(0,pos)+'max500'+photo_url.substring(pos+8);// console.log(photo_url);\nreturn{id:res.hotel_id,name:res.hotel_name,type:res.accommodation_type_name,image:photo_url,address:res.address,city:res.city,country:res.country_trans,currency_code:res.currency_code,price:res.min_total_price,review_score:res.review_score,review_word:res.review_score_word};//accomadation_type_name,hotel_name_trans,hotel_name,main_photo_url,country_trans,class,zip,location_score,address,id,min_total_price,currency_code,facility_review_score{review_count,review_word,rating},hotel_id,review_score(overall),review_score_word,review_nr,hotel_facilities,city,city_in_trans,\n// order_by : popularity,distance,class_ascending,review_score,price\n// filter: price::9-40(range),class // eh app kr layi\n});return refined_result;});case 5:res=_context.sent;return _context.abrupt(\"return\",res);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getRooms(_x,_x2){return _ref.apply(this,arguments);};}();export default getRooms;/*\r\n    // %252C seprator in bbox\r\n    // let bbox = `${latitude - 0.030268}%252C${latitude + 0.030268}%252C${longitude - 0.130171}%252C${longitude + 0.130171}`;\r\n    // console.log(rooms);\r\n    // console.log(bbox);\r\n\r\n    list by map usess boundary box , \r\n    fetch(`https://apidojo-booking-v1.p.rapidapi.com/properties/list-by-map?search_id=none&price_filter_currencycode=USD&languagecode=en-us&order_by=popularity&guest_qty=1&room_qty=1&departure_date=${departure_date}&bbox=${bbox}&arrival_date=${arrival_date}`, {\r\n        \"method\": \"GET\",\r\n        \"headers\": {\r\n            \"x-rapidapi-host\": key['host'],\r\n            \"x-rapidapi-key\": key['key']\r\n        }\r\n    })\r\n */","map":{"version":3,"sources":["C:/Users/Rishabh/Desktop/babel1/react/project/hotel/front-end/src/api_calls/getRooms.js"],"names":["key","getRooms","dest","date","Date","console","log","arrival_date","getFullYear","getMonth","getDate","setDate","departure_date","dest_type","dest_id","fetch","then","res","json","message","localeCompare","refined_result","result","map","photo_url","main_photo_url","pos","indexOf","substring","id","hotel_id","name","hotel_name","type","accommodation_type_name","image","address","city","country","country_trans","currency_code","price","min_total_price","review_score","review_word","review_score_word"],"mappings":"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","sourcesContent":["import key from './apiKey'\r\n\r\nconst getRooms = async(dest, date) => {\r\n    let arrival_date, departure_date;\r\n\r\n    if (!date) {\r\n        let date = new Date();\r\n        console.log(date);\r\n        arrival_date = '' + date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\r\n        date.setDate(date.getDate() + 7);\r\n        departure_date = '' + date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\r\n    }\r\n    console.log(arrival_date, departure_date);\r\n\r\n    console.log(`req = https://apidojo-booking-v1.p.rapidapi.com/properties/list?price_filter_currencycode=USD&search_id=none&order_by=popularity&languagecode=en-us&search_type=${dest.dest_type}&offset=0&dest_ids=${dest.dest_id}&guest_qty=${2}&arrival_date=${arrival_date}&departure_date=${departure_date}&room_qty=${1}`);\r\n\r\n    let res = await fetch(`https://apidojo-booking-v1.p.rapidapi.com/properties/list?price_filter_currencycode=USD&search_id=none&order_by=popularity&languagecode=en-us&search_type=${dest.dest_type}&offset=0&dest_ids=${dest.dest_id}&guest_qty=${2}&arrival_date=${arrival_date}&departure_date=${departure_date}&room_qty=${1}`, {\r\n            \"method\": \"GET\",\r\n            \"headers\": {\r\n                \"x-rapidapi-host\": \"apidojo-booking-v1.p.rapidapi.com\",\r\n                \"x-rapidapi-key\": key['key']\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(res => {\r\n            if (res.message && res.message.localeCompare(\"Key doesn't exists\") === 0) {\r\n                console.log(res.message);\r\n                console.log(\"add api key in your project file api_calls/apiKey\\nif you don't have key then get it from \\nhttps://rapidapi.com/apidojo/api/booking\")\r\n                return null;\r\n            }\r\n            if (res.message) {\r\n                console.log(res.message);\r\n                return null;\r\n            }   \r\n            console.log(res);\r\n            let refined_result = res.result.map((res) => {\r\n                // res.main_photo_url = \"http://r-ec.bstatic.com/xdata/images/hotel/square60/77897735.jpg?k=9bef4152fd76026ad7885fc95a2a48d04a5a6bb68a1eefa5e292a8429aa3845e&o=\";\r\n                // resolution is not good so replace square60 with max500\r\n                let photo_url = res.main_photo_url;\r\n                var pos = photo_url.indexOf(\"square60\");\r\n                photo_url = photo_url.substring(0, pos) + 'max500' + photo_url.substring(pos + 8);\r\n                // console.log(photo_url);\r\n                return { id: res.hotel_id, name: res.hotel_name, type: res.accommodation_type_name, image: photo_url, address: res.address, city: res.city, country: res.country_trans,currency_code : res.currency_code,price: res.min_total_price,review_score: res.review_score,review_word: res.review_score_word }\r\n                //accomadation_type_name,hotel_name_trans,hotel_name,main_photo_url,country_trans,class,zip,location_score,address,id,min_total_price,currency_code,facility_review_score{review_count,review_word,rating},hotel_id,review_score(overall),review_score_word,review_nr,hotel_facilities,city,city_in_trans,\r\n                // order_by : popularity,distance,class_ascending,review_score,price\r\n                // filter: price::9-40(range),class // eh app kr layi\r\n            })\r\n            return refined_result;\r\n        })\r\n    return res;\r\n}\r\nexport default getRooms;\r\n\r\n/*\r\n    // %252C seprator in bbox\r\n    // let bbox = `${latitude - 0.030268}%252C${latitude + 0.030268}%252C${longitude - 0.130171}%252C${longitude + 0.130171}`;\r\n    // console.log(rooms);\r\n    // console.log(bbox);\r\n\r\n    list by map usess boundary box , \r\n    fetch(`https://apidojo-booking-v1.p.rapidapi.com/properties/list-by-map?search_id=none&price_filter_currencycode=USD&languagecode=en-us&order_by=popularity&guest_qty=1&room_qty=1&departure_date=${departure_date}&bbox=${bbox}&arrival_date=${arrival_date}`, {\r\n        \"method\": \"GET\",\r\n        \"headers\": {\r\n            \"x-rapidapi-host\": key['host'],\r\n            \"x-rapidapi-key\": key['key']\r\n        }\r\n    })\r\n */"]},"metadata":{},"sourceType":"module"}