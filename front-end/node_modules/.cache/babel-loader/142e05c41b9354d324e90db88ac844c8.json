{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rishabh\\\\Desktop\\\\babel1\\\\react\\\\project\\\\hotel\\\\front-end\\\\src\\\\components\\\\searchList\\\\searchList.jsx\";\nimport React, { Component } from 'react';\nimport SearchFilter from './../searchFilter/searchFilter';\nimport getRooms from './../../api_calls/getRooms';\nimport getSymbolFromCurrency from 'currency-symbol-map';\nimport { throwStatement } from '@babel/types';\nimport { Switch, Route, Link, useRouteMatch } from 'react-router-dom';\nimport './searchList.css';\n\nclass List extends Component {\n  constructor(props) {\n    super(props);\n    console.log('contructor', this.props); // const{longitude,latitude} = this.props.location.state.bbox[0];\n\n    this.state = {\n      show_list: false,\n      dest: null,\n      minPrice: 0,\n      maxPrice: 1000\n    };\n    this.disableShowList = this.disableShowList.bind(this);\n    this.loadHotels = this.loadHotels.bind(this);\n  }\n\n  disableShowList() {\n    this.setState({\n      show_list: false\n    });\n  }\n  /*this method is now unsafe_componentWillRecieveProps , and in next update it will be removed so use getDerivedStateFromProps\r\n   componentWillReceiveProps(new_props) // during update component life cycle =  componentWillReceiveProps -> shouldComponentUpdate ->(if true from scu) componentWillUpdate -> render -> componentDidUpdate\r\n   {\r\n       if(this.page_loaded){\r\n           this.loadHotels();\r\n       }\r\n   }\r\n   */\n  // static method so this keyword cannot be used so props and state are send as arguments\n  // and to setState return new state obj , or null if don't want to update state \n\n\n  static getDerivedStateFromProps(props, state) {\n    // eh har var chalda after constructor and without constructor when new props arrives(update) \n    // not after setState\n    const dest = props.location.state.destination[0]; //if state.dest is null means first time then update state\n    // or if new props.dest_id is different then current state\n\n    if (state.dest === null || state.dest.dest_id !== dest.dest_id) {\n      console.log('rerender');\n      return {\n        dest: props.location.state.destination[0],\n        needUpdate: true\n      };\n    } else return null;\n  }\n\n  componentDidUpdate() {\n    console.log(\"component update lalala , need update = \".concat(this.state.needUpdate));\n\n    if (this.state.needUpdate) {\n      this.setState({\n        needUpdate: false\n      });\n      this.loadHotels(); //fetch nal jo changes ho rhe ne oh detect nhi krda\n      //when we search and are already on /search\n    }\n  }\n\n  loadHotels(filters) {\n    console.log(filters);\n    this.disableShowList();\n    console.log('loadHotels()');\n    const dest = this.state.dest;\n    console.log(dest);\n    getRooms(dest).then(list => {\n      if (list) {\n        console.log(list);\n        this.setState({\n          show_list: true,\n          hotels: list,\n          loading: false\n        });\n      }\n    }); // this.setState({ show_list: true, hotels: [] });\n    // this.setState({ page_loaded: true });\n  }\n\n  componentDidMount() {\n    console.log('inside componentdidmount');\n    this.loadHotels(); //nhi thik a , eh sirf ik var hi chalda\n  }\n\n  render() {\n    // let { path, url } = useRouteMatch();// path used in Route , url used in link(matched)\n    // let path = '/search';\n    // let url = '/search';\n    let list;\n    let dest = this.state.dest;\n\n    if (this.state.show_list) {\n      list = this.state.hotels.map((x, index) => {\n        return React.createElement(Link, {\n          to: {\n            pathname: \"search/hotel/\".concat(x.id),\n            state: {\n              hotel: x\n            }\n          },\n          style: {\n            textDecoration: 'none'\n          },\n          className: \"row hotelLink\",\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-3\",\n          style: {\n            paddingTop: \"25%\",\n            backgroundColor: \"grey\",\n            overflow: \"hidden\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          style: {\n            position: \"absolute\",\n            top: \"0px\",\n            left: \"0px\",\n            width: \"100%\",\n            height: \"100%\",\n            objectFit: \"cover\"\n          },\n          src: x.image,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col-8\",\n          style: {\n            paddingLeft: \"30px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row hotelHeading\",\n          style: {\n            fontSize: '2.2vw',\n            fontWeight: '600'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, x.name), React.createElement(\"div\", {\n          className: \"row\",\n          style: {\n            fontSize: \"1.5vw\",\n            fontWeight: \"\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, x.address + \",\" + x.city + \",\" + x.country), React.createElement(\"div\", {\n          className: \"col-lg-6 rating\",\n          style: {\n            paddingTop: '9px',\n            paddingLeft: '0px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          style: {\n            fontSize: '1.4vw',\n            fontWeight: '500'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, \"Rating\"), React.createElement(\"span\", {\n          style: {\n            fontWeight: '400',\n            fontSize: '1.4vw',\n            paddingLeft: '6px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, x.review_word))), React.createElement(\"div\", {\n          className: \"col-6\",\n          style: {\n            padding: '10px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"progress\",\n          style: {\n            paddingLeft: '0px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"progress-bar\",\n          style: {\n            width: '' + x.review_score * 10 + '%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, x.review_score))))), React.createElement(\"div\", {\n          className: \"row pricing\",\n          style: {\n            fontSize: '1.4vw',\n            paddingTop: '8px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"price\",\n          style: {\n            fontSize: '1.4vw',\n            fontWeight: '500'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, getSymbolFromCurrency(x.currency_code), x.price), \"/week\")));\n      });\n    } else {\n      list = React.createElement(\"h1\", {\n        style: {\n          textAlign: 'center',\n          backgroundColor: 'white'\n        },\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Loading...\");\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container-fluid\",\n      style: {\n        backgroundColor: '#eceef1'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-2\",\n      style: {\n        borderRight: '1px solid #e8e5e5',\n        backgroundColor: 'white',\n        marginTop: '6px',\n        marginLeft: '6px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(SearchFilter, {\n      loadHotels: this.loadHotels,\n      dest: this.state.dest,\n      minPrice: this.state.minPrice,\n      maxPrice: this.state.maxPrice,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-lg-9\",\n      style: {\n        marginTop: '6px',\n        marginLeft: '6px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      style: {\n        backgroundColor: 'white',\n        padding: '6px',\n        marginBottom: '6px',\n        fontSize: '16px',\n        fontWeight: '500'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"showing search result for : \", dest.name), list)));\n  }\n\n}\n\nexport default List;","map":{"version":3,"sources":["C:/Users/Rishabh/Desktop/babel1/react/project/hotel/front-end/src/components/searchList/searchList.jsx"],"names":["React","Component","SearchFilter","getRooms","getSymbolFromCurrency","throwStatement","Switch","Route","Link","useRouteMatch","List","constructor","props","console","log","state","show_list","dest","minPrice","maxPrice","disableShowList","bind","loadHotels","setState","getDerivedStateFromProps","location","destination","dest_id","needUpdate","componentDidUpdate","filters","then","list","hotels","loading","componentDidMount","render","map","x","index","pathname","id","hotel","textDecoration","paddingTop","backgroundColor","overflow","position","top","left","width","height","objectFit","image","paddingLeft","fontSize","fontWeight","name","address","city","country","review_word","padding","review_score","currency_code","price","textAlign","borderRight","marginTop","marginLeft","marginBottom"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,qBAAP,MAAkC,qBAAlC;AACA,SAASC,cAAT,QAA+B,cAA/B;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA8BC,aAA9B,QAAmD,kBAAnD;AACA,OAAO,kBAAP;;AAEA,MAAMC,IAAN,SAAmBT,SAAnB,CAA6B;AACzBU,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B,KAAKF,KAA/B,EAFe,CAGf;;AACA,SAAKG,KAAL,GAAa;AACTC,MAAAA,SAAS,EAAE,KADF;AAETC,MAAAA,IAAI,EAAE,IAFG;AAGTC,MAAAA,QAAQ,EAAE,CAHD;AAITC,MAAAA,QAAQ,EAAE;AAJD,KAAb;AAMA,SAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AACH;;AACDD,EAAAA,eAAe,GAAG;AACd,SAAKG,QAAL,CAAc;AAAEP,MAAAA,SAAS,EAAE;AAAb,KAAd;AACH;AACD;;;;;;;;AASA;AACA;;;AAEA,SAAOQ,wBAAP,CAAgCZ,KAAhC,EAAuCG,KAAvC,EAA8C;AAC1C;AACA;AAEA,UAAME,IAAI,GAAGL,KAAK,CAACa,QAAN,CAAeV,KAAf,CAAqBW,WAArB,CAAiC,CAAjC,CAAb,CAJ0C,CAK1C;AACA;;AACA,QAAKX,KAAK,CAACE,IAAN,KAAe,IAAhB,IAA0BF,KAAK,CAACE,IAAN,CAAWU,OAAX,KAAuBV,IAAI,CAACU,OAA1D,EAAoE;AAChEd,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACA,aAAO;AACHG,QAAAA,IAAI,EAAEL,KAAK,CAACa,QAAN,CAAeV,KAAf,CAAqBW,WAArB,CAAiC,CAAjC,CADH;AAEHE,QAAAA,UAAU,EAAE;AAFT,OAAP;AAIH,KAND,MAQI,OAAO,IAAP;AACP;;AACDC,EAAAA,kBAAkB,GAAG;AACjBhB,IAAAA,OAAO,CAACC,GAAR,mDAAuD,KAAKC,KAAL,CAAWa,UAAlE;;AACA,QAAI,KAAKb,KAAL,CAAWa,UAAf,EAA2B;AACvB,WAAKL,QAAL,CAAc;AAAEK,QAAAA,UAAU,EAAE;AAAd,OAAd;AACA,WAAKN,UAAL,GAFuB,CAEL;AAClB;AACH;AACJ;;AACDA,EAAAA,UAAU,CAACQ,OAAD,EAAU;AAChBjB,IAAAA,OAAO,CAACC,GAAR,CAAYgB,OAAZ;AACA,SAAKV,eAAL;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AAHgB,UAIRG,IAJQ,GAIC,KAAKF,KAJN,CAIRE,IAJQ;AAKhBJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,IAAZ;AAEAd,IAAAA,QAAQ,CAACc,IAAD,CAAR,CACKc,IADL,CACWC,IAAD,IAAU;AACZ,UAAIA,IAAJ,EAAU;AACNnB,QAAAA,OAAO,CAACC,GAAR,CAAYkB,IAAZ;AACA,aAAKT,QAAL,CAAc;AAAEP,UAAAA,SAAS,EAAE,IAAb;AAAmBiB,UAAAA,MAAM,EAAED,IAA3B;AAAiCE,UAAAA,OAAO,EAAE;AAA1C,SAAd;AACH;AACJ,KANL,EAPgB,CAchB;AACA;AACH;;AACDC,EAAAA,iBAAiB,GAAG;AAChBtB,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACA,SAAKQ,UAAL,GAFgB,CAGhB;AACH;;AACDc,EAAAA,MAAM,GAAG;AACL;AACA;AACA;AAEA,QAAIJ,IAAJ;AALK,QAMCf,IAND,GAMU,KAAKF,KANf,CAMCE,IAND;;AAOL,QAAI,KAAKF,KAAL,CAAWC,SAAf,EAA0B;AACtBgB,MAAAA,IAAI,GAAG,KAAKjB,KAAL,CAAWkB,MAAX,CAAkBI,GAAlB,CAAsB,CAACC,CAAD,EAAIC,KAAJ,KAAc;AACvC,eAAO,oBAAC,IAAD;AAAM,UAAA,EAAE,EAAE;AACbC,YAAAA,QAAQ,yBAAkBF,CAAC,CAACG,EAApB,CADK;AAEb1B,YAAAA,KAAK,EAAE;AACH2B,cAAAA,KAAK,EAAEJ;AADJ;AAFM,WAAV;AAKJ,UAAA,KAAK,EAAE;AAAEK,YAAAA,cAAc,EAAE;AAAlB,WALH;AAK+B,UAAA,SAAS,EAAC,eALzC;AAKyD,UAAA,GAAG,EAAEJ,KAL9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAMH;AAAK,UAAA,SAAS,EAAC,OAAf;AAAuB,UAAA,KAAK,EAAE;AAAEK,YAAAA,UAAU,EAAE,KAAd;AAAqBC,YAAAA,eAAe,EAAE,MAAtC;AAA8CC,YAAAA,QAAQ,EAAE;AAAxD,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,KAAK,EAAE;AAAEC,YAAAA,QAAQ,EAAE,UAAZ;AAAwBC,YAAAA,GAAG,EAAE,KAA7B;AAAoCC,YAAAA,IAAI,EAAE,KAA1C;AAAiDC,YAAAA,KAAK,EAAE,MAAxD;AAAgEC,YAAAA,MAAM,EAAE,MAAxE;AAAgFC,YAAAA,SAAS,EAAE;AAA3F,WAAZ;AAAkH,UAAA,GAAG,EAAEd,CAAC,CAACe,KAAzH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CANG,EASH;AAAK,UAAA,SAAS,EAAC,OAAf;AAAuB,UAAA,KAAK,EAAE;AAAEC,YAAAA,WAAW,EAAE;AAAf,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAkC,UAAA,KAAK,EAAE;AAAEC,YAAAA,QAAQ,EAAE,OAAZ;AAAqBC,YAAAA,UAAU,EAAE;AAAjC,WAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKlB,CAAC,CAACmB,IADP,CADJ,EAII;AAAK,UAAA,SAAS,EAAC,KAAf;AAAqB,UAAA,KAAK,EAAE;AAAEF,YAAAA,QAAQ,EAAE,OAAZ;AAAqBC,YAAAA,UAAU,EAAE;AAAjC,WAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKlB,CAAC,CAACoB,OAAF,GAAY,GAAZ,GAAkBpB,CAAC,CAACqB,IAApB,GAA2B,GAA3B,GAAiCrB,CAAC,CAACsB,OADxC,CAJJ,EAOI;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAiC,UAAA,KAAK,EAAE;AAAEhB,YAAAA,UAAU,EAAE,KAAd;AAAqBU,YAAAA,WAAW,EAAE;AAAlC,WAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAM,UAAA,KAAK,EAAE;AAAEC,YAAAA,QAAQ,EAAE,OAAZ;AAAqBC,YAAAA,UAAU,EAAE;AAAjC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI;AAAM,UAAA,KAAK,EAAE;AAAEA,YAAAA,UAAU,EAAE,KAAd;AAAqBD,YAAAA,QAAQ,EAAE,OAA/B;AAAwCD,YAAAA,WAAW,EAAE;AAArD,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA4EhB,CAAC,CAACuB,WAA9E,CAFJ,CADJ,CADJ,EAQI;AAAK,UAAA,SAAS,EAAC,OAAf;AAAuB,UAAA,KAAK,EAAE;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,UAAf;AAA0B,UAAA,KAAK,EAAE;AAAER,YAAAA,WAAW,EAAE;AAAf,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,cAAf;AAA8B,UAAA,KAAK,EAAE;AAAEJ,YAAAA,KAAK,EAAG,KAAKZ,CAAC,CAACyB,YAAF,GAAiB,EAAtB,GAA2B;AAArC,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAmFzB,CAAC,CAACyB,YAArF,CADJ,CADJ,CARJ,CADJ,CAPJ,EAuBI;AAAK,UAAA,SAAS,EAAC,aAAf;AAA6B,UAAA,KAAK,EAAE;AAAER,YAAAA,QAAQ,EAAE,OAAZ;AAAqBX,YAAAA,UAAU,EAAE;AAAjC,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,OAAf;AAAuB,UAAA,KAAK,EAAE;AAAEW,YAAAA,QAAQ,EAAE,OAAZ;AAAqBC,YAAAA,UAAU,EAAE;AAAjC,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKpD,qBAAqB,CAACkC,CAAC,CAAC0B,aAAH,CAD1B,EAC6C1B,CAAC,CAAC2B,KAD/C,CADJ,UAvBJ,CATG,CAAP;AAwCH,OAzCM,CAAP;AA0CH,KA3CD,MA4CK;AACDjC,MAAAA,IAAI,GAAG;AAAI,QAAA,KAAK,EAAE;AAAEkC,UAAAA,SAAS,EAAE,QAAb;AAAuBrB,UAAAA,eAAe,EAAE;AAAxC,SAAX;AAA8D,QAAA,SAAS,EAAC,KAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAP;AACH;;AACD,WAAO;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAiC,MAAA,KAAK,EAAE;AAAEA,QAAAA,eAAe,EAAE;AAAnB,OAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACH;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,KAAK,EAAE;AAAEsB,QAAAA,WAAW,EAAE,mBAAf;AAAoCtB,QAAAA,eAAe,EAAE,OAArD;AAA8DuB,QAAAA,SAAS,EAAE,KAAzE;AAAgFC,QAAAA,UAAU,EAAE;AAA5F,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI,oBAAC,YAAD;AAAc,MAAA,UAAU,EAAE,KAAK/C,UAA/B;AAA2C,MAAA,IAAI,EAAE,KAAKP,KAAL,CAAWE,IAA5D;AAAkE,MAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWG,QAAvF;AAAiG,MAAA,QAAQ,EAAE,KAAKH,KAAL,CAAWI,QAAtH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,EAMI;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,KAAK,EAAE;AAAEiD,QAAAA,SAAS,EAAE,KAAb;AAAoBC,QAAAA,UAAU,EAAE;AAAhC,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAqB,MAAA,KAAK,EAAE;AAAExB,QAAAA,eAAe,EAAE,OAAnB;AAA4BiB,QAAAA,OAAO,EAAE,KAArC;AAA4CQ,QAAAA,YAAY,EAAE,KAA1D;AAAiEf,QAAAA,QAAQ,EAAE,MAA3E;AAAmFC,QAAAA,UAAU,EAAE;AAA/F,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCACiCvC,IAAI,CAACwC,IADtC,CADJ,EAIKzB,IAJL,CANJ,CADG,CAAP;AAgBH;;AAlJwB;;AAoJ7B,eAAetB,IAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport SearchFilter from './../searchFilter/searchFilter';\r\nimport getRooms from './../../api_calls/getRooms';\r\nimport getSymbolFromCurrency from 'currency-symbol-map'\r\nimport { throwStatement } from '@babel/types';\r\nimport { Switch, Route, Link, useRouteMatch } from 'react-router-dom'\r\nimport './searchList.css'\r\n\r\nclass List extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        console.log('contructor', this.props);\r\n        // const{longitude,latitude} = this.props.location.state.bbox[0];\r\n        this.state = {\r\n            show_list: false,\r\n            dest: null,\r\n            minPrice: 0,\r\n            maxPrice: 1000\r\n        }\r\n        this.disableShowList = this.disableShowList.bind(this);\r\n        this.loadHotels = this.loadHotels.bind(this);\r\n    }\r\n    disableShowList() {\r\n        this.setState({ show_list: false })\r\n    }\r\n    /*this method is now unsafe_componentWillRecieveProps , and in next update it will be removed so use getDerivedStateFromProps\r\n     componentWillReceiveProps(new_props) // during update component life cycle =  componentWillReceiveProps -> shouldComponentUpdate ->(if true from scu) componentWillUpdate -> render -> componentDidUpdate\r\n     {\r\n         if(this.page_loaded){\r\n             this.loadHotels();\r\n         }\r\n     }\r\n     */\r\n\r\n    // static method so this keyword cannot be used so props and state are send as arguments\r\n    // and to setState return new state obj , or null if don't want to update state \r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        // eh har var chalda after constructor and without constructor when new props arrives(update) \r\n        // not after setState\r\n\r\n        const dest = props.location.state.destination[0];\r\n        //if state.dest is null means first time then update state\r\n        // or if new props.dest_id is different then current state\r\n        if ((state.dest === null) || (state.dest.dest_id !== dest.dest_id)) {\r\n            console.log('rerender');\r\n            return {\r\n                dest: props.location.state.destination[0],\r\n                needUpdate: true\r\n            }\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n    componentDidUpdate() {\r\n        console.log(`component update lalala , need update = ${this.state.needUpdate}`);\r\n        if (this.state.needUpdate) {\r\n            this.setState({ needUpdate: false });\r\n            this.loadHotels();//fetch nal jo changes ho rhe ne oh detect nhi krda\r\n            //when we search and are already on /search\r\n        }\r\n    }\r\n    loadHotels(filters) {\r\n        console.log(filters)\r\n        this.disableShowList();\r\n        console.log('loadHotels()');\r\n        const { dest } = this.state;\r\n        console.log(dest);\r\n\r\n        getRooms(dest)\r\n            .then((list) => {\r\n                if (list) {\r\n                    console.log(list);\r\n                    this.setState({ show_list: true, hotels: list, loading: false });\r\n                }\r\n            })\r\n        // this.setState({ show_list: true, hotels: [] });\r\n        // this.setState({ page_loaded: true });\r\n    }\r\n    componentDidMount() {\r\n        console.log('inside componentdidmount');\r\n        this.loadHotels();\r\n        //nhi thik a , eh sirf ik var hi chalda\r\n    }\r\n    render() {\r\n        // let { path, url } = useRouteMatch();// path used in Route , url used in link(matched)\r\n        // let path = '/search';\r\n        // let url = '/search';\r\n\r\n        let list;\r\n        let { dest } = this.state;\r\n        if (this.state.show_list) {\r\n            list = this.state.hotels.map((x, index) => {\r\n                return <Link to={{\r\n                    pathname: `search/hotel/${x.id}`,\r\n                    state: {\r\n                        hotel: x\r\n                    }\r\n                }} style={{ textDecoration: 'none' }} className=\"row hotelLink\" key={index}>\r\n                    <div className=\"col-3\" style={{ paddingTop: \"25%\", backgroundColor: \"grey\", overflow: \"hidden\" }}>\r\n                        <img style={{ position: \"absolute\", top: \"0px\", left: \"0px\", width: \"100%\", height: \"100%\", objectFit: \"cover\" }} src={x.image} />\r\n                    </div>\r\n                    <div className=\"col-8\" style={{ paddingLeft: \"30px\" }}>\r\n                        <div className=\"row hotelHeading\" style={{ fontSize: '2.2vw', fontWeight: '600' }}>\r\n                            {x.name}\r\n                        </div>\r\n                        <div className=\"row\" style={{ fontSize: \"1.5vw\", fontWeight: \"\" }}>\r\n                            {x.address + \",\" + x.city + \",\" + x.country}\r\n                        </div>\r\n                        <div className=\"col-lg-6 rating\" style={{ paddingTop: '9px', paddingLeft: '0px' }}>\r\n                            <div className='row'>\r\n                                <div className='col-6'>\r\n                                    <div className='row'>\r\n                                        <span style={{ fontSize: '1.4vw', fontWeight: '500' }}>Rating</span>\r\n                                        <span style={{ fontWeight: '400', fontSize: '1.4vw', paddingLeft: '6px' }}>{x.review_word}</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className='col-6' style={{ padding: '10px' }}>\r\n                                    <div className='progress' style={{ paddingLeft: '0px' }}>\r\n                                        <div className='progress-bar' style={{ width: ('' + x.review_score * 10 + '%') }}>{x.review_score}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className='row pricing' style={{ fontSize: '1.4vw', paddingTop: '8px' }}>\r\n                            <div className='price' style={{ fontSize: '1.4vw', fontWeight: '500' }}>\r\n                                {getSymbolFromCurrency(x.currency_code)}{x.price}\r\n                            </div>\r\n                            /week\r\n                        </div>\r\n                    </div>\r\n                </Link >\r\n            })\r\n        }\r\n        else {\r\n            list = <h1 style={{ textAlign: 'center', backgroundColor: 'white' }} className='row'>Loading...</h1>\r\n        }\r\n        return <div className='container-fluid' style={{ backgroundColor: '#eceef1' }}>\r\n            <div className='row'>\r\n                <div className='col-lg-2' style={{ borderRight: '1px solid #e8e5e5', backgroundColor: 'white', marginTop: '6px', marginLeft: '6px' }}>\r\n\r\n                    <SearchFilter loadHotels={this.loadHotels} dest={this.state.dest} minPrice={this.state.minPrice} maxPrice={this.state.maxPrice} />\r\n\r\n                </div>\r\n                <div className='col-lg-9' style={{ marginTop: '6px', marginLeft: '6px' }}>\r\n                    <div className='row' style={{ backgroundColor: 'white', padding: '6px', marginBottom: '6px', fontSize: '16px', fontWeight: '500' }}>\r\n                        showing search result for : {dest.name}\r\n                    </div>\r\n                    {list}\r\n                </div>\r\n            </div>\r\n\r\n        </div>;\r\n    }\r\n}\r\nexport default List;"]},"metadata":{},"sourceType":"module"}